import{_ as M,t as a,v as i,J as y,x as t,K as x,d as k,y as u,L as N,r as m,M as c,N as P,O as w,P as _,Q as $,B as C,i as T,E as U,R as V,z as I}from"./HYg0GEZG.js";const B={},F={class:"bg-white rounded-lg shadow-md p-4 py-1 animate-pulse"};function z(n,e){return a(),i(x,null,y(4,l=>t("td",F,e[0]||(e[0]=[t("div",{class:"w-full h-8 bg-gray-200 rounded-lg"},null,-1)]))),64)}const E=M(B,[["render",z]]),D={class:"p-4 py-1 text-center"},A={class:"text-sm text-slate-500"},J={class:"p-4 py-1 text-center"},W={class:"text-sm text-slate-500"},K={class:"p-4 py-1"},Q={class:"text-sm text-slate-800"},R={class:"p-4 py-1"},X={class:"text-sm text-slate-500"},q=k({__name:"postTemplate",props:{post:{}},setup(n){return(e,l)=>(a(),i(x,null,[t("td",D,[t("p",A,u(e.post.id),1)]),t("td",J,[t("p",W,u(e.post.userId),1)]),t("td",K,[t("p",Q,u(e.post.title),1)]),t("td",R,[t("p",X,u(e.post.body),1)])],64))}}),S=N("posts",{state:()=>({posts:[],totalPostsCount:0,showThrobber:!0,page:1,limit:10,sortOrder:"asc"}),getters:{totalPages(n){return Math.ceil(n.totalPostsCount/n.limit)},currentPagePosts(n){const e=(n.page-1)*n.limit+1,l=n.page*n.limit;return Object.values(n.posts).filter(p=>p.id>=e&&p.id<=l)}},actions:{async getPostsList(){this.showThrobber=!0;try{const n=await fetch(`https://jsonplaceholder.typicode.com/posts?_page=${this.page}&_limit=${this.limit}&_sort=id&_order=${this.sortOrder}`),e=await n.json(),l=parseInt(n.headers.get("X-Total-Count")??"0");this.totalPostsCount<l&&(this.totalPostsCount=l),e.forEach(r=>{this.posts[r.id]={id:r.id,userId:r.userId,title:r.title,body:r.body}})}catch(n){console.error("Failed to fetch posts:",n)}finally{this.showThrobber=!1}},toggleSortOrder(){this.sortOrder=this.sortOrder==="asc"?"desc":"asc",this.getPostsList()},async createPost(n){this.showThrobber=!0;let e={};try{const l=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json; charset=UTF-8"}});if(l.ok){const r=await l.json();this.posts.push({id:r.id,userId:r.userId,title:r.title,body:r.body}),this.totalPostsCount+=1,e=r}else console.error("Failed to create post:",l.statusText)}catch(l){console.error("Failed to create post:",l)}finally{return this.showThrobber=!1,e}}}}),G={key:0,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50"},H={key:1,class:"max-h-full w-full max-w-xl overflow-y-auto sm:rounded-2xl bg-white"},Y={class:"w-full"},Z={class:"m-8 my-16 max-w-[400px] mx-auto"},tt={class:"mb-4"},et={class:"mb-6"},st={class:"space-y-4 mt-2"},ot={class:"w-full"},lt={class:"m-8 my-16 max-w-[400px] mx-auto text-center"},nt={key:0,class:"mb-8 text-3xl font-extrabold text-green-300"},rt={class:"mt-8 text-xl font-regular text-gray-700"},at={key:1,class:"mb-4 text-3xl font-extrabold text-red-300"},it=k({__name:"createPostModal",setup(n){const e=S(),l=m(""),r=m(""),f=m(""),p=m(!1),h=m(!0),g=m({});async function v(){try{const b={userId:parseInt(l.value),title:r.value,body:f.value};g.value=await e.createPost(b),console.log(g.value)}catch{h.value=!1}finally{p.value=!0}}return(b,s)=>(a(),i("div",{class:"fixed left-0 top-0 flex h-full w-full items-center justify-center bg-black bg-opacity-50 py-10",onClick:s[6]||(s[6]=$(o=>b.$emit("close"),["self"]))},[c(e).showThrobber?(a(),i("div",G,s[7]||(s[7]=[t("div",{role:"status"},[t("div",{class:"inline-block size-16 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white",role:"status"},[t("span",{class:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]"},"Loading...")]),t("span",{class:"sr-only"},"Loading...")],-1)]))):P("",!0),p.value?(a(),i("div",{key:2,class:"max-h-full w-full max-w-xl overflow-y-auto sm:rounded-2xl bg-white",onClick:s[5]||(s[5]=$(()=>{},["stop"]))},[t("div",ot,[t("div",lt,[h.value?(a(),i("h1",nt,[s[12]||(s[12]=C(" Post Created Successfully! ")),t("div",rt,u(g.value),1)])):(a(),i("h1",at,"Failed to Create Post")),t("button",{class:"p-3 bg-gray-900 rounded-full text-white w-full font-semibold",onClick:s[4]||(s[4]=o=>b.$emit("close"))},"Close")])])])):(a(),i("div",H,[t("div",Y,[t("div",Z,[t("div",tt,[s[9]||(s[9]=t("h1",{class:"mb-4 text-3xl font-extrabold text-gray-900"},"Create Post",-1)),s[10]||(s[10]=t("div",{class:"font-bold text-gray-700"},"User Id",-1)),w(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>l.value=o),class:"my-2 w-full border rounded-md px-4 py-2 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:"User Id"},null,512),[[_,l.value]]),s[11]||(s[11]=t("div",{class:"font-bold text-gray-700"},"Post Title",-1)),w(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.value=o),class:"my-2 w-full border rounded-md px-4 py-2 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:"Title"},null,512),[[_,r.value]]),t("div",et,[s[8]||(s[8]=t("label",{for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},"Post Body:",-1)),w(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=o=>f.value=o),id:"postContent",name:"postContent",rows:"4",class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:"What's on your mind?"},null,512),[[_,f.value]])])]),t("div",st,[t("button",{class:"p-3 bg-gray-900 rounded-full text-white w-full font-semibold",onClick:v},"Create Post"),t("button",{class:"p-3 bg-slate-50 border rounded-full w-full font-semibold",onClick:s[3]||(s[3]=o=>b.$emit("close"))},"Close Window")])])])]))]))}}),dt={class:"max-w-[1280px] mx-auto"},ut={class:"relative flex flex-col w-full h-full text-gray-700 bg-white shadow-md rounded-lg bg-clip-border"},ct={class:"w-full text-left table-fixed min-w-max"},pt={key:0,class:"flex justify-between items-center px-4 py-3"},bt={class:"text-sm text-slate-500"},mt={class:"flex space-x-1"},ft=["onClick"],gt=k({__name:"index",setup(n){const e=S(),l=m(!1);function r(){l.value=!0}function f(){l.value=!1}function p(s){e.page=s,e.getPostsList()}function h(){e.page>1&&(e.page--,e.getPostsList())}function g(){e.page<e.totalPages&&(e.page++,e.getPostsList())}const v=T(()=>(e.page-1)*e.limit+1),b=T(()=>{const s=e.page*e.limit;return s>e.totalPostsCount?e.totalPostsCount:s});return U(()=>e.page,()=>{e.getPostsList()},{immediate:!0}),(s,o)=>{const j=E,O=q,L=it;return a(),i(x,null,[t("div",dt,[o[8]||(o[8]=t("div",{class:"w-full flex justify-between items-center mb-3 mt-1 pl-3"},null,-1)),t("div",{class:""},[o[2]||(o[2]=t("h3",{class:"text-lg font-semibold text-slate-800 ml-4"},"Posts",-1)),t("div",{class:"flex items-center justify-between px-4 py-3"},[o[1]||(o[1]=t("p",{class:"text-slate-500"},"Table with posts",-1)),t("button",{onClick:r,class:"font-bold text-slate-700"},"Create Post")])]),t("div",ut,[t("table",ct,[t("thead",null,[t("tr",null,[t("th",{class:"p-4 w-16 border-b border-slate-200 bg-slate-50 text-center cursor-pointer hover:bg-slate-100",onClick:o[0]||(o[0]=(...d)=>c(e).toggleSortOrder&&c(e).toggleSortOrder(...d))},o[3]||(o[3]=[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"Id",-1)])),o[4]||(o[4]=t("th",{class:"p-4 w-16 border-b border-slate-200 bg-slate-50 text-center"},[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"UserId")],-1)),o[5]||(o[5]=t("th",{class:"p-4 w-3/12 border-b border-slate-200 bg-slate-50"},[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"Title")],-1)),o[6]||(o[6]=t("th",{class:"p-4 border-b border-slate-200 bg-slate-50"},[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"Description")],-1))])]),t("tbody",null,[c(e).showThrobber?(a(),i(x,{key:0},y(10,d=>t("tr",{key:d,class:"hover:bg-slate-50 border-b border-slate-200 h-16"},[I(j)])),64)):(a(!0),i(x,{key:1},y(c(e).currentPagePosts,d=>(a(),i("tr",{key:d.id,class:"hover:bg-slate-50 border-b border-slate-200 h-16"},[I(O,{post:d},null,8,["post"])]))),128))])]),c(e).totalPostsCount?(a(),i("div",pt,[t("div",bt,[o[7]||(o[7]=C(" Showing ")),t("b",null,u(v.value)+" - "+u(b.value),1),C(" of "+u(c(e).totalPostsCount),1)]),t("div",mt,[t("button",{onClick:h,class:"px-3 py-1 min-w-9 min-h-9 text-sm font-normal text-slate-500 bg-white border border-slate-200 rounded hover:bg-slate-50 hover:border-slate-400 transition duration-200 ease"}," Prev "),(a(!0),i(x,null,y(c(e).totalPages,d=>(a(),i("button",{onClick:()=>p(d),key:d,class:"px-3 py-1 min-w-9 min-h-9 text-sm font-normal text-white bg-slate-800 border border-slate-800 rounded hover:bg-slate-600 hover:border-slate-600 transition duration-200 ease"},u(d),9,ft))),128)),t("button",{onClick:g,class:"px-3 py-1 min-w-9 min-h-9 text-sm font-normal text-slate-500 bg-white border border-slate-200 rounded hover:bg-slate-50 hover:border-slate-400 transition duration-200 ease"}," Next ")])])):P("",!0)])]),l.value?(a(),V(L,{key:0,onClose:f})):P("",!0)],64)}}});export{gt as default};
