import{_ as L,t as l,v as n,J as y,x as t,K as f,d as k,y as p,L as N,r as c,M as u,N as P,O as w,P as _,Q as $,B as C,R as U,i as T,S as V,z as S}from"./Bf37kz7J.js";const B={},z={class:"bg-white rounded-lg shadow-md p-4 py-1 animate-pulse"};function F(r,e){return l(),n(f,null,y(4,a=>t("td",z,e[0]||(e[0]=[t("div",{class:"w-full h-8 bg-gray-200 rounded-lg"},null,-1)]))),64)}const D=L(B,[["render",F]]),E={class:"p-4 py-1 text-center"},J={class:"text-sm text-slate-500"},R={class:"p-4 py-1 text-center"},W={class:"text-sm text-slate-500"},K={class:"p-4 py-1"},Q={class:"text-sm text-slate-800"},X={class:"p-4 py-1"},q={class:"text-sm text-slate-500"},A=k({__name:"postTemplate",props:{post:{}},setup(r){return(e,a)=>(l(),n(f,null,[t("td",E,[t("p",J,p(e.post.id),1)]),t("td",R,[t("p",W,p(e.post.userId),1)]),t("td",K,[t("p",Q,p(e.post.title),1)]),t("td",X,[t("p",q,p(e.post.body),1)])],64))}}),O=N("posts",{state:()=>({posts:[],totalPostsCount:0,showThrobber:!0,page:1,limit:10,sortOrder:"asc"}),getters:{totalPages(r){return Math.ceil(r.totalPostsCount/r.limit)}},actions:{async getPostsList(){this.showThrobber=!0;try{const r=await fetch(`https://jsonplaceholder.typicode.com/posts?_page=${this.page}&_limit=${this.limit}&_sort=id&_order=${this.sortOrder}`),e=await r.json();this.totalPostsCount=parseInt(r.headers.get("X-Total-Count")??"0"),this.posts=e.map(a=>({...a}))}catch(r){console.error("Failed to fetch posts:",r)}finally{this.showThrobber=!1}},toggleSortOrder(){this.sortOrder=this.sortOrder==="asc"?"desc":"asc",this.getPostsList()}}}),G={key:0,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50"},H={key:1,class:"max-h-full w-full max-w-xl overflow-y-auto sm:rounded-2xl bg-white"},Y={class:"w-full"},Z={class:"m-8 my-16 max-w-[400px] mx-auto"},tt={class:"mb-4"},et={class:"mb-6"},st={class:"space-y-4 mt-2"},ot={class:"w-full"},lt={class:"m-8 my-16 max-w-[400px] mx-auto text-center"},nt={key:0,class:"mb-8 text-3xl font-extrabold text-green-300"},rt={class:"mt-8 text-xl font-regular text-gray-700"},at={key:1,class:"mb-4 text-3xl font-extrabold text-red-300"},it=k({__name:"createPostModal",setup(r){const e=O(),a=c(""),x=c(""),g=c(""),m=c(!1),b=c(!0),h=c("");async function v(){e.showThrobber=!0;try{const i=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify({title:x.value,body:g.value,userId:a.value}),headers:{"Content-type":"application/json; charset=UTF-8"}});i.ok?(h.value=await i.json(),b.value=!0):b.value=!1}catch(i){console.error("Failed to create post:",i),b.value=!1}finally{e.showThrobber=!1,m.value=!0}}return(i,s)=>(l(),n("div",{class:"fixed left-0 top-0 flex h-full w-full items-center justify-center bg-black bg-opacity-50 py-10",onClick:s[6]||(s[6]=$(o=>i.$emit("close"),["self"]))},[u(e).showThrobber?(l(),n("div",G,s[7]||(s[7]=[t("div",{role:"status"},[t("div",{class:"inline-block size-16 animate-spin rounded-full border-4 border-solid border-current border-e-transparent align-[-0.125em] text-surface motion-reduce:animate-[spin_1.5s_linear_infinite] dark:text-white",role:"status"},[t("span",{class:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]"},"Loading...")]),t("span",{class:"sr-only"},"Loading...")],-1)]))):P("",!0),m.value?(l(),n("div",{key:2,class:"max-h-full w-full max-w-xl overflow-y-auto sm:rounded-2xl bg-white",onClick:s[5]||(s[5]=$(()=>{},["stop"]))},[t("div",ot,[t("div",lt,[b.value?(l(),n("h1",nt,[s[12]||(s[12]=C(" Post Created Successfully! ")),t("div",rt,p(h.value),1)])):(l(),n("h1",at,"Failed to Create Post")),t("button",{class:"p-3 bg-gray-900 rounded-full text-white w-full font-semibold",onClick:s[4]||(s[4]=o=>i.$emit("close"))},"Close")])])])):(l(),n("div",H,[t("div",Y,[t("div",Z,[t("div",tt,[s[9]||(s[9]=t("h1",{class:"mb-4 text-3xl font-extrabold text-gray-900"},"Create Post",-1)),s[10]||(s[10]=t("div",{class:"font-bold text-gray-700"},"User Id",-1)),w(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),class:"my-2 w-full border rounded-md px-4 py-2 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:"User Id"},null,512),[[_,a.value]]),s[11]||(s[11]=t("div",{class:"font-bold text-gray-700"},"Post Title",-1)),w(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>x.value=o),class:"my-2 w-full border rounded-md px-4 py-2 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:"Title"},null,512),[[_,x.value]]),t("div",et,[s[8]||(s[8]=t("label",{for:"postContent",class:"block text-gray-700 text-sm font-bold mb-2"},"Post Body:",-1)),w(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=o=>g.value=o),id:"postContent",name:"postContent",rows:"4",class:"w-full border-2 rounded-md px-4 py-2 leading-5 transition duration-150 ease-in-out sm:text-sm sm:leading-5 resize-none focus:outline-none focus:border-blue-500",placeholder:"What's on your mind?"},null,512),[[_,g.value]])])]),t("div",st,[t("button",{class:"p-3 bg-gray-900 rounded-full text-white w-full font-semibold",onClick:v},"Create Post"),t("button",{class:"p-3 bg-slate-50 border rounded-full w-full font-semibold",onClick:s[3]||(s[3]=o=>i.$emit("close"))},"Close Window")])])])]))]))}}),dt={class:"max-w-[1280px] mx-auto"},ut={class:"relative flex flex-col w-full h-full text-gray-700 bg-white shadow-md rounded-lg bg-clip-border"},pt={class:"w-full text-left table-fixed min-w-max"},ct={key:0,class:"flex justify-between items-center px-4 py-3"},mt={class:"text-sm text-slate-500"},bt={class:"flex space-x-1"},ft=["onClick"],gt=k({__name:"index",setup(r){const e=O();e.getPostsList();const{posts:a}=U(e);function x(){e.page>1&&(e.page--,e.getPostsList())}function g(){e.page<e.totalPages&&(e.page++,e.getPostsList())}const m=c(!1);function b(){m.value=!0}function h(){m.value=!1}const v=T(()=>e.sortOrder==="asc"?(e.page-1)*e.limit+1:e.totalPostsCount-(e.page*e.limit-e.limit)),i=T(()=>e.sortOrder==="asc"?Math.min(e.page*e.limit,e.totalPostsCount):e.totalPostsCount-e.page*e.limit+1);return(s,o)=>{const M=D,j=A,I=it;return l(),n(f,null,[t("div",dt,[o[8]||(o[8]=t("div",{class:"w-full flex justify-between items-center mb-3 mt-1 pl-3"},null,-1)),t("div",{class:""},[o[2]||(o[2]=t("h3",{class:"text-lg font-semibold text-slate-800 ml-4"},"Posts",-1)),t("div",{class:"flex items-center justify-between px-4 py-3"},[o[1]||(o[1]=t("p",{class:"text-slate-500"},"Table with posts",-1)),t("button",{onClick:b,class:"font-bold text-slate-700"},"Create Post")])]),t("div",ut,[t("table",pt,[t("thead",null,[t("tr",null,[t("th",{class:"p-4 w-16 border-b border-slate-200 bg-slate-50 text-center cursor-pointer hover:bg-slate-100",onClick:o[0]||(o[0]=(...d)=>u(e).toggleSortOrder&&u(e).toggleSortOrder(...d))},o[3]||(o[3]=[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"Id",-1)])),o[4]||(o[4]=t("th",{class:"p-4 w-16 border-b border-slate-200 bg-slate-50 text-center"},[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"UserId")],-1)),o[5]||(o[5]=t("th",{class:"p-4 w-3/12 border-b border-slate-200 bg-slate-50"},[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"Title")],-1)),o[6]||(o[6]=t("th",{class:"p-4 border-b border-slate-200 bg-slate-50"},[t("p",{class:"text-sm font-normal leading-none text-slate-500"},"Description")],-1))])]),t("tbody",null,[u(e).showThrobber?(l(),n(f,{key:0},y(10,d=>t("tr",{key:d,class:"hover:bg-slate-50 border-b border-slate-200 h-16"},[S(M)])),64)):(l(!0),n(f,{key:1},y(u(a),d=>(l(),n("tr",{key:d.id,class:"hover:bg-slate-50 border-b border-slate-200 h-16"},[S(j,{post:d},null,8,["post"])]))),128))])]),u(a).length!=0?(l(),n("div",ct,[t("div",mt,[o[7]||(o[7]=C(" Showing ")),t("b",null,p(v.value)+"-"+p(i.value),1),C(" of "+p(u(e).totalPostsCount),1)]),t("div",bt,[t("button",{onClick:x,class:"px-3 py-1 min-w-9 min-h-9 text-sm font-normal text-slate-500 bg-white border border-slate-200 rounded hover:bg-slate-50 hover:border-slate-400 transition duration-200 ease"}," Prev "),(l(!0),n(f,null,y(u(e).totalPages,d=>(l(),n("button",{onClick:()=>{u(e).page=d,u(e).getPostsList()},key:d,class:"px-3 py-1 min-w-9 min-h-9 text-sm font-normal text-white bg-slate-800 border border-slate-800 rounded hover:bg-slate-600 hover:border-slate-600 transition duration-200 ease"},p(d),9,ft))),128)),t("button",{onClick:g,class:"px-3 py-1 min-w-9 min-h-9 text-sm font-normal text-slate-500 bg-white border border-slate-200 rounded hover:bg-slate-50 hover:border-slate-400 transition duration-200 ease"}," Next ")])])):P("",!0)])]),m.value?(l(),V(I,{key:0,onClose:h})):P("",!0)],64)}}});export{gt as default};
